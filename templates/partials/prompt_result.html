<div id="error-panel" hx-swap-oob="true" class="mt-6">
  {% if error %}
  <div class="p-4 bg-red-950/40 border border-red-500/30 rounded-xl text-red-200 text-sm flex items-center gap-3 shadow-lg">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 shrink-0 text-red-400">
      <path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" />
    </svg>
    <span>{{ error }}</span>
  </div>
  {% endif %}
</div>

{% if result %}
<div class="mt-8 space-y-4 animate-fade-in-up">
  <div class="relative group">
    <div class="absolute -inset-0.5 bg-gradient-to-r from-primary-600 to-indigo-600 rounded-xl opacity-75 blur transition duration-200 group-hover:opacity-100"></div>
    <div class="relative bg-gray-900 rounded-xl p-6 border border-gray-700">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2">
        <div>
          <h3 class="text-primary-400 font-bold tracking-tight flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd" d="M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436-1.118-.52-2.316-.992-3.579-1.405V12a6.75 6.75 0 0 0-5.356-6.689l1.834 2.273ZM1.5 13.5a.75.75 0 0 1 .75-.75 10.501 10.501 0 0 1 10.5 10.5.75.75 0 0 1-.75.75 10.5 10.5 0 0 1-10.5-10.5ZM13.5 12V2.25a.75.75 0 0 1 .75-.75 10.501 10.501 0 0 1 10.5 10.5.75.75 0 0 1-.75.75 10.501 10.501 0 0 1-10.5-10.5Z" clip-rule="evenodd" />
            </svg>
            {{ result.modelFamily }}
          </h3>
          <p class="text-xs text-gray-500 font-mono mt-0.5 ml-7">{{ result.checkpoint }}</p>
        </div>
        <button
          type="button"
          data-copy-target="positive"
          class="copy-button flex items-center gap-1.5 px-3 py-1.5 rounded-md bg-gray-800 hover:bg-gray-700 text-xs text-gray-300 transition-colors border border-gray-700 self-end sm:self-auto"
        >
          <span class="copy-label">Copy</span>
        </button>
      </div>
      <div class="bg-gray-950 p-4 rounded-lg border border-gray-800 overflow-x-auto">
        <p id="positive-text" class="text-gray-300 font-mono text-sm leading-relaxed whitespace-pre-wrap">{{ result.prompt }}</p>
      </div>
    </div>
  </div>

  {% if result.negativePrompt %}
  <div class="bg-gray-900 rounded-xl p-6 border border-gray-700">
    <div class="flex justify-between items-start mb-4">
      <h3 class="text-red-400 font-bold tracking-tight text-sm uppercase">Negative Prompt</h3>
      <button
        type="button"
        data-copy-target="negative"
        class="copy-button flex items-center gap-1.5 px-3 py-1.5 rounded-md bg-gray-800 hover:bg-gray-700 text-xs text-gray-300 transition-colors border border-gray-700"
      >
        <span class="copy-label">Copy</span>
      </button>
    </div>
    <div class="bg-gray-950 p-3 rounded-lg border border-gray-800">
      <p id="negative-text" class="text-gray-400 font-mono text-xs leading-relaxed">{{ result.negativePrompt }}</p>
    </div>
  </div>
  {% endif %}
</div>
{% else %}
<div class="absolute inset-0 flex flex-col items-center justify-center text-gray-600 p-8 text-center border-2 border-dashed border-gray-800/50 rounded-xl bg-gray-900/20">
  <div class="w-20 h-20 rounded-full bg-gray-800/50 flex items-center justify-center mb-4">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-10 h-10 opacity-40">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
    </svg>
  </div>
  <p class="text-gray-400 font-medium">Ready to Transmute</p>
  <p class="text-xs mt-2">Select models and upload images to begin generation.</p>
</div>
{% endif %}
